var r=require("vscode");function i(o,n=5e3){setTimeout(()=>{o.dispose()},n)}function m(o){return o=JSON.stringify(o),new Promise((n,s)=>{fetch("https://jsonformatter.curiousconcept.com/process",{headers:{accept:"application/json, text/javascript, */*; q=0.01","accept-language":"en-US,en;q=0.9,fr;q=0.8,ar;q=0.7","content-type":"application/x-www-form-urlencoded; charset=UTF-8","sec-ch-ua":'"Not_A Brand";v="8", "Chromium";v="120", "Google Chrome";v="120"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"Linux"',"sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin","sec-gpc":"1","x-requested-with":"XMLHttpRequest"},referrer:"https://jsonformatter.curiousconcept.com/",referrerPolicy:"strict-origin-when-cross-origin",body:`data=${encodeURIComponent(o)}&jsontemplate=2&jsonspec=4&jsonfix=on&autoprocess=&version=2`,method:"POST",mode:"cors",credentials:"include"}).then(e=>e.json()).then(e=>{if(e.result&&e.result.data){let t=JSON.stringify(JSON.parse(e.result.data.join("")),null,4),a=r.window.showInformationMessage("JSON formatted successfully");i(a),n(t)}else{let t=r.window.showErrorMessage("Failed to format JSON");i(t),s()}}).catch(e=>{let t=r.window.showErrorMessage(`Failed to format JSON ${e}`);i(t),s(e)})})}function l(o){let n=r.commands.registerCommand("extension.formatJson",async function(){let s=r.window.activeTextEditor;if(s){let e=s.document,t=s.selection,a=e.getText(t);if(a.length===0){let c=r.window.showInformationMessage("No JSON selected.");i(c);return}try{let c=await m(a);s.edit(d=>{d.replace(t,c)})}catch(c){let d=r.window.showErrorMessage(`Failed to format JSON ${c}`);i(d)}}});o.subscriptions.push(n)}function u(){}module.exports={activate:l,deactivate:u,formatJson:m};
