var s=require("vscode");function c(r,n=5e3){setTimeout(()=>{r.dispose()},n)}function m(r){return new Promise((n,o)=>{fetch("https://jsonformatter.curiousconcept.com/process",{headers:{accept:"application/json, text/javascript, */*; q=0.01","accept-language":"en-US,en;q=0.9,fr;q=0.8,ar;q=0.7","content-type":"application/x-www-form-urlencoded; charset=UTF-8","sec-ch-ua":'"Google Chrome";v="117", "Not;A=Brand";v="8", "Chromium";v="117"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"Linux"',"sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin","sec-gpc":"1","x-requested-with":"XMLHttpRequest"},referrer:"https://jsonformatter.curiousconcept.com/",referrerPolicy:"strict-origin-when-cross-origin",body:`data=${encodeURIComponent(r)}&jsontemplate=1&jsonspec=4&jsonfix=on&autoprocess=&version=2`,method:"POST",mode:"cors",credentials:"include"}).then(e=>e.json()).then(e=>{if(e.result&&e.result.data){let t=JSON.stringify(JSON.parse(e.result.data.join("")),null,4),i=s.window.showInformationMessage("JSON formatted successfully");c(i),n(t)}else{let t=s.window.showErrorMessage("Failed to format JSON");c(t),o()}}).catch(e=>{let t=s.window.showErrorMessage("Failed to format JSON");c(t),o(e)})})}function l(r){let n=s.commands.registerCommand("extension.formatJson",async function(){let o=s.window.activeTextEditor;if(o){let e=o.document,t=o.selection,i=e.getText(t);if(i.length===0){let a=s.window.showInformationMessage("No JSON selected.");c(a);return}try{let a=await m(i);o.edit(d=>{d.replace(t,a)})}catch{let d=s.window.showErrorMessage("Failed to format JSON");c(d)}}});r.subscriptions.push(n)}function u(){}module.exports={activate:l,deactivate:u,formatJson:m};
